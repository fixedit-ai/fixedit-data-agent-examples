# Configuration for processing GitHub API response
# This plugin extracts the conclusion from the response and converts it to a color

[[processors.starlark]]
  # Name of the measurement to process
  namepass = ["github_workflow"]

  # Starlark script to process the data
  source = '''
def apply(metric):
    # Get the conclusion from the tags
    conclusion = metric.tags.get("conclusion")
    
    # Convert conclusion to color
    color = "yellow"  # Default color for running state
    if conclusion == "success":
        color = "green"
    elif conclusion == "failure":
        color = "red"
    
    # Create a new metric with the color only
    new = Metric("workflow_color")
    new.fields["color"] = color
    return new
''' 