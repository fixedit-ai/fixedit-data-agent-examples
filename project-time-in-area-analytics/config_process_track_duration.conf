# Track Duration Calculator Processor
#
# This processor calculates time in area for object tracking and manages state cleanup.
# It processes detection frames and outputs:
# 1. Original detection metrics with added time_in_area_seconds field
# 2. Debug metrics when stale tracks are cleaned up
#
# Input: detection_frame metrics with track_id, timestamp, coordinates
# Output: Same metrics with time_in_area_seconds field + optional debug metrics
#
# State Management:
# - Tracks first_seen_seconds and last_seen_seconds for each track_id
# - Automatically cleans up tracks not seen for 60+ seconds
# - Outputs debug messages when tracks are removed

[[processors.starlark]]
  # Only process detection frames for duration calculation
  namepass = ["detection_frame"]

  # Track duration calculator - adds dwell_time_seconds field and debug messages
  script = "${HELPER_FILES_DIR}/track_duration_calculator.star"
