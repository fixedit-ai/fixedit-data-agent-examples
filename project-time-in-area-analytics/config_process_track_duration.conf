# Track Duration Calculator Processor
#
# This processor calculates time in area for object tracking and manages state cleanup.
# It processes detection frames (filtered by zone) and outputs:
# 1. Original detection metrics with added time_in_area_seconds field
# 2. Debug metrics when stale tracks are cleaned up
#
# Input: detection_frame_in_zone metrics with track_id, timestamp, coordinates
# Output: detection_frame_with_duration metrics with time_in_area_seconds field + optional debug metrics

[[processors.starlark]]
  # Only process detection frames that passed zone filtering
  namepass = ["detection_frame_in_zone"]

  # Run the apply function in the starlark script to process all
  # detections and add the extra time_in_area_seconds field to them.
  script = "${HELPER_FILES_DIR}/track_duration_calculator.star"
