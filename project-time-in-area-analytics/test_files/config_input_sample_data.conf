# Sample Detection Data Input Configuration for Testing
#
# This configuration uses Telegraf's execd input plugin to simulate camera
# metadata stream for testing the time-in-area analytics pipeline.
#
# Required Environment Variables:
# - HELPER_FILES_DIR: Directory containing project files
# - SAMPLE_FILE: Path to sample data file relative to HELPER_FILES_DIR
#
# Key Features:
# - Reads sample detection data from local JSON file
# - Provides identical data structure to real camera metadata
# - Enables testing of processor logic independently
# - Allows development and testing without camera hardware

[[inputs.execd]]
  # Command to execute - outputs JSON lines from sample file
  command = ["${HELPER_FILES_DIR}/test_files/sample_data_feeder.sh"]

  # Parse each line as JSON
  data_format = "json"

  # Override metric name for clarity
  name_override = "detection_frame"

  # String fields that should be preserved as strings during JSON parsing
  json_string_fields = ["timestamp", "track_id", "object_type"]
